## AI 旅行规划师（Web）

注意：切勿将任何 API Key 提交到代码仓库。请使用设置页本地填写或通过服务器环境变量配置，并通过后端代理访问第三方服务。

### 开发启动
1. 安装依赖
```bash
npm i
```
2. 启动前端与后端（两个进程）
```bash
npm run dev:all
```
前端：`http://localhost:5173`  
后端代理：`http://localhost:8787`

### 配置与密钥
- 本地开发：在前端“设置”页填写 `LLM API Key`、`高德地图 Key`、`Supabase URL/anon key` 等，将存储在浏览器本地存储（不会提交到仓库）。
- 生产部署：请将密钥放在服务端环境变量中，通过后端代理访问第三方服务，避免在浏览器暴露。

### 功能概览
- 行程规划：调用后端 `/api/llm/plan`（后端转发到阿里云百炼兼容接口）生成行程文本与概要。
- 语音输入：优先使用浏览器 `SpeechRecognition`（不支持时可对接科大讯飞）。
- 地图：高德地图 JS SDK（需在设置页填入 Key）。
- 认证与数据：Supabase（待集成：登录/行程与预算云同步）。

### 安全与配置检查清单（务必遵守）
- 不要在前端代码写入任何密钥（包括仓库内 `.env` 文件），只用“设置”页本地存储或服务端环境变量。
- 生产环境仅通过后端代理访问第三方服务（阿里云百炼、语音、地图等），前端不直连带鉴权的 API。
- 服务器环境变量示例（不要提交到仓库）：
  - `PORT`、`LLM_API_BASE`（可选）
  - 阿里云百炼等第三方服务的 Key 仅存放在服务端，前端不暴露
- Supabase RLS 开启，所有表按 `user_id = auth.uid()` 进行行级安全策略控制。
- 在 CI/CD 中使用密钥管理（如 GitHub Actions Secrets / Vercel / Netlify Env），不要把密钥写入构建产物。
- 对回传到前端的行程与预算数据进行必要的校验和清洗，避免在 UI 中注入可执行内容。


